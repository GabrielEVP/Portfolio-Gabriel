---
import contactData from "../data/contact.json";
---

<section data-aos="fade-down" id="contact" class="min-h-screen py-16 flex items-center animate-fade-scroll" style="background-color: #1a191d;">
   <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
      <div class="text-center mb-12">
         <h2 class="text-4xl lg:text-5xl font-light text-white mb-6 tracking-wide">
            {contactData.title}
         </h2>
         <div class="w-24 h-1 bg-white mx-auto rounded-full"></div>
      </div>
      <form
         id="contact-form"
         action="https://formspree.io/f/xvgqapdk"
         method="POST"
         class="space-y-8 p-12 rounded-2xl shadow-2xl min-h-[500px] w-full"
         style="background-color: #1f1e22; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.05);"
      >
         <div>
            <label for="name" class="block text-gray-200 mb-3 text-lg font-medium">{contactData.label_name}</label>
            <input
               type="text"
               id="name"
               name="name"
               required
               class="w-full border border-gray-600 text-white rounded-xl px-5 py-4 text-base focus:outline-none focus:border-white focus:ring-2 focus:ring-white/20 transition-all duration-200"
               style="background-color: #2a2831;"
            />
         </div>
         <div>
            <label for="email" class="block text-gray-200 mb-3 text-lg font-medium">{contactData.label_email}</label>
            <input
               type="email"
               id="email"
               name="email"
               required
               class="w-full border border-gray-600 text-white rounded-xl px-5 py-4 text-base focus:outline-none focus:border-white focus:ring-2 focus:ring-white/20 transition-all duration-200"
               style="background-color: #2a2831;"
            />
         </div>
         <div>
            <label for="message" class="block text-gray-200 mb-3 text-lg font-medium">{contactData.label_message}</label>
            <textarea
               id="message"
               name="message"
               rows="6"
               required
               class="w-full border border-gray-600 text-white rounded-xl px-5 py-4 text-base focus:outline-none focus:border-white focus:ring-2 focus:ring-white/20 transition-all duration-200 resize-none"
               style="background-color: #2a2831;"></textarea>
         </div>
         <button
            type="submit"
            class="w-full text-white rounded-xl px-6 py-4 font-semibold uppercase tracking-widest text-lg hover:bg-gray-700 transition-all duration-200 shadow-lg hover:shadow-xl hover:scale-105"
            style="background-color: #2a2831;"
         >
            {contactData.button}
         </button>
         <div id="success-message" class="hidden text-green-400 text-center mt-4 font-medium text-lg">
            {contactData.success}
         </div>
      </form>
   </div>
</section>

<script type="module">
   const form = document.getElementById("contact-form");
   const successMsg = document.getElementById("success-message");

   if (form && successMsg) {
      form.addEventListener("submit", async (e) => {
         e.preventDefault();

         const formData = new FormData(form);
         const response = await fetch(form.action, {
            method: "POST",
            body: formData,
            headers: { Accept: "application/json" },
         });

         if (response.ok) {
            form.reset();
            successMsg.classList.remove("hidden");
            setTimeout(() => successMsg.classList.add("hidden"), 3000);
         }
      });
   }
</script>
